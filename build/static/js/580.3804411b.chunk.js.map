{"version":3,"file":"static/js/580.3804411b.chunk.js","mappings":"kRAee,SAASA,EAAT,GAAoD,IAA9BC,EAA6B,EAA7BA,QAASC,EAAoB,EAApBA,SACtCC,GAAcC,EAAAA,EAAAA,KACdC,GAAWC,EAAAA,EAAAA,MACTC,GAAWC,EAAAA,EAAAA,MAAXD,OACR,EAAoDE,EAAAA,UAClD,GADF,eAAOC,EAAP,KAA2BC,EAA3B,KAIA,GAAID,EAAoB,OAAO,SAACE,EAAA,EAAD,IAE/B,IAAMC,EAAY,mCAAG,qFACnBF,GAAsB,GADH,UAEbG,EAAAA,EAAAA,GAAI,OAAQ,YAAa,CAAEC,KAAM,OAFpB,uBAGbR,EAAO,YAAa,CAAES,KAAM,OAAQ,GAHvB,OAInBX,EAASY,EAAAA,EAAAA,SAJU,2CAAH,qDAOlB,OACE,iBAAKC,UAAU,cAAf,WACE,iBAAKA,UAAU,uBAAf,WACE,yBACGjB,KAGH,4BACE,UAACkB,EAAA,EAAD,CAAMC,IAAI,OAAV,UAAkBjB,EAAYa,KAAKK,KAAnC,KAA2ClB,EAAYa,KAAKD,KAA5D,QACA,mBAAQO,QAAST,EAAjB,2BAIJ,gBAAKK,UAAU,uBAAf,SAAuChB,S,qJChC9B,SAASqB,EAAT,GAA4C,IAArBrB,EAAoB,EAApBA,SAC9BsB,GAAkBC,EAAAA,EAAAA,KAElBxB,GACJ,iCACE,SAAC,IAAD,CAAMyB,MAAM,QAAZ,UACE,SAAC,KAAD,CAAMC,GAAIV,EAAAA,EAAAA,OAAV,qBAEF,SAAC,IAAD,CAAMS,MAAM,QAAZ,UACE,UAAC,KAAD,CAAMC,GAAIV,EAAAA,EAAAA,WAAV,qBAAsCO,GAAkB,SAAC,IAAD,UAAQA,IAA2B,WAE7F,SAAC,IAAD,CAAME,MAAM,QAAZ,UACE,SAAC,KAAD,CAAMC,GAAIV,EAAAA,EAAAA,UAAV,wBAEF,SAAC,IAAD,CAAMS,MAAM,QAAZ,UACE,SAAC,KAAD,CAAMC,GAAIV,EAAAA,EAAAA,WAAV,2BAKN,OAAO,SAAC,IAAD,CAAYhB,QAASA,EAArB,SAA+BC,M,0EC1BzB,SAAS0B,EAAT,GAAsC,IAArB1B,EAAoB,EAApBA,SAE9B,OACE,iBAAMgB,UAAU,QAAhB,SACGhB,M,mECTQ,SAASuB,IACtB,MCAa,WACb,IAAQI,GAAkBC,EAAAA,EAAAA,KAAlBD,cAER,IAAKA,EAAe,MAAM,IAAIE,MAAM,4BAEpC,MAAO,CAAEF,cAAAA,GDLiBG,GAE1B,OAFA,EAAQH,cAEaI,QAAO,SAACC,EAAKC,GAEhC,OADAD,GAAOC,EAAaC,eAEnB","sources":["components/shared/Layout/BaseLayout/BaseLayout.tsx","components/shared/Layout/OwnerLayout/OwnerLayout.tsx","components/uikit/Badge/Badge.tsx","hooks/useNewMessagesCount.ts","hooks/useNotifications.ts"],"sourcesContent":["import useCurrentAuth from 'hooks/useCurrentAuth';\nimport Routes from 'lib/Routes';\nimport React from \"react\";\nimport { useNavigate } from 'react-router-dom';\nimport { useSWRConfig } from \"swr\";\nimport API from \"API\";\nimport Loader from \"components/uikit/Loader\";\nimport Text from \"components/uikit/Text\";\nimport \"components/shared/Layout/BaseLayout/BaseLayout.css\";\n\ninterface IProps {\n  sidebar: React.ReactNode;\n  children: React.ReactNode;\n}\n\nexport default function BaseLayout({ sidebar, children }: IProps) {\n  const currentAuth = useCurrentAuth();\n  const navigate = useNavigate();\n  const { mutate } = useSWRConfig();\n  const [isLogoutInProgress, setIsLogoutInProgress] = React.useState<boolean>(\n    false\n  );\n\n  if (isLogoutInProgress) return <Loader />;\n\n  const handleLogout = async () => {\n    setIsLogoutInProgress(true);\n    await API(\"POST\", \"/api/auth\", { role: null });\n    await mutate('/api/auth', { user: null }, false)\n    navigate(Routes.login());\n  }\n\n  return (\n    <div className=\"base-layout\">\n      <div className=\"base-layout__sidebar\">\n        <div>\n          {sidebar}\n        </div>\n\n        <div>\n          <Text tag=\"span\">{currentAuth.user.name} [{currentAuth.user.role}]</Text>\n          <button onClick={handleLogout}>Logout</button>\n        </div>\n      </div>\n\n      <div className=\"base-layout__content\">{children}</div>\n    </div>\n  );\n}\n","import Badge from 'components/uikit/Badge';\nimport useNewMessagesCount from 'hooks/useNewMessagesCount';\nimport Routes from 'lib/Routes';\nimport React from \"react\";\nimport { Link } from \"react-router-dom\";\n\nimport Text from \"components/uikit/Text\";\nimport BaseLayout from \"components/shared/Layout/BaseLayout\";\n\ninterface IProps {\n  children: React.ReactNode;\n}\n\nexport default function OwnerLayout({ children }: IProps) {\n  const newMessageCount = useNewMessagesCount();\n\n  const sidebar = (\n    <>\n      <Text color=\"white\">\n        <Link to={Routes.home()}>Home</Link>\n      </Text>\n      <Text color=\"white\">\n        <Link to={Routes.messages()}>Messages{newMessageCount ? <Badge>{newMessageCount}</Badge> : null}</Link>\n      </Text>\n      <Text color=\"white\">\n        <Link to={Routes.clients()}>Clients</Link>\n      </Text>\n      <Text color=\"white\">\n        <Link to={Routes.settings()}>Settings</Link>\n      </Text>\n    </>\n  );\n\n  return <BaseLayout sidebar={sidebar}>{children}</BaseLayout>;\n}\n","import React from \"react\";\nimport \"./Badge.css\";\n\ninterface IProps {\n  children: React.ReactNode;\n}\n\nexport default function Badge({ children }: IProps) {\n\n  return (\n    <span className=\"badge\">\n      {children}\n    </span>\n  );\n}\n","import useNotifications from 'hooks/useNotifications';\n\nexport default function useNewMessagesCount() {\n  const { notifications } = useNotifications();\n\n  return notifications.reduce((acc, notification) => {\n    acc += notification.messageCount;\n    return acc;\n  }, 0);\n}\n","import { NotificationType } from 'types/api/notification';\nimport { useLoadNotifications } from './api/notifications';\n\nexport default function useNotifications(): { notifications: NotificationType[] } {\n  const { notifications } = useLoadNotifications();\n\n  if (!notifications) throw new Error('Notifications not loaded')\n\n  return { notifications };\n}\n"],"names":["BaseLayout","sidebar","children","currentAuth","useCurrentAuth","navigate","useNavigate","mutate","useSWRConfig","React","isLogoutInProgress","setIsLogoutInProgress","Loader","handleLogout","API","role","user","Routes","className","Text","tag","name","onClick","OwnerLayout","newMessageCount","useNewMessagesCount","color","to","Badge","notifications","useLoadNotifications","Error","useNotifications","reduce","acc","notification","messageCount"],"sourceRoot":""}